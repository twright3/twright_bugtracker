@using twright_bugtracker.Models
@using twright_bugtracker.Helpers
@using twright_bugtracker.ViewModels

@model IEnumerable<UserViewModel>

@{
    ViewBag.Title = "UserIndex";
}

<div class="customContentPanel">
    <h2>UserIndex</h2>

    @*<p>
        @Html.ActionLink("Create New", "Create")
    </p>*@
    <table id="DataTable" class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.FirstName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.LastName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Email)
                </th>
                <th>
                    @Html.DisplayName("Role")
                </th>
                <th>
                    @Html.DisplayName("Links...")
                </th>
            </tr>
        </thead>


        <tbody>
            @foreach (var item in Model)
            {

                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.FirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.LastName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Email)
                    </td>
                    <td>
                        @{
                            var roleHelper = new UserRolesHelper();
                            foreach (var role in roleHelper.ListEmailRoles(item.Email))
                            {
                                @role <br />
                            }

                        }

                    </td>







                    <td>
                        @*@Html.ActionLink("Edit Profile", "EditProfile", new { id = item.Email }) |
                    @Html.ActionLink("Assign Projects", "AssignProjects", new { id = item.Email }) |*@
                        @Html.ActionLink("Assign Roles", "ManageRoles", new { email = item.Email })

                    </td>
                </tr>
            }
        </tbody>
    </table>

</div>